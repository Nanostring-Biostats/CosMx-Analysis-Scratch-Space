---
title: "Creating ROIs with `napari-cosmx`"
author:
  - name: Evelyn Metzger
toc: true
toc-title: Contents
toc-depth: 3
toc-expand: 2
toc-location: left
number-sections: true
number-depth: 4
date: "2024-05-26"
categories: [visualization, napari, ROIs]
draft: false
# image: figures/prostate.gif
description: Regions of Interests (ROIs) have a variety of uses when analyzing spatial data. This blog post shows you how to select ROIs with `napari-cosmx` and some of the downstream things you can do with those ROIs.
code-fold: true

format:
  html:
    theme: 
      light: custom.scss
      dark: darkly
  pdf: default
  docx:
    toc: true
    number-sections: true
    
prefer-html: true

---

# Introduction



## Prerequisites

Readers should be be familiar with our `napari-cosmx` plugin. If you are unfamiliar, 
please checkout the previous post [Getting Started with the `napari-cosmx` plugin post](../using-napari-for-cosmx-data/index.qmd){target="_blank"} to learn more.
We'll make use of an example dataset from one of NanoString's public releases and
stitch the files with the technique from [this blog post](../napari-programmatically-stitching/stitching-programmatically.qmd){target="_blank"}.

## The Example Dataset

The example dataset that I am using in this post is the mouse coronal hemisphere
dataset that can be downloaded from NanoString's website [here](https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/cosmx-smi-mouse-brain-ffpe-dataset/){target="blank"}. The data come in a variety of formats though napari
is not one of them. We therefore must download the `Coronal Hemisphere Raw Data Export` and use the technique from [this blog post](../napari-programmatically-stitching/stitching-programmatically.qmd){target="_blank"}
to create the napari-ready files. We will also make use of the cell typing data from
the `Seurat Object`.

::: {.callout-note}
The Raw data format for the mouse data are not the same as the AtoMx 1.3.2 export
format. We'll need to put the data in a format that `napari-cosmx` understands
before we can stitch.
:::

The raw data that I downloaded was named `HalfBrain.zip`. Unzipping it and looking
inside shows an atypical folder structure

```
#| eval: false
#| echo: false
#| label: "fig-windows-installer"

unzip HalfBrain.zip
tree -f -L 3 HalfBrain


```

We can use `stitch-images` and `read-targets` within our virtual environment 
to directly stitch our napari files. 


# Defining ROIs

## Keybindings!

## Filtering cells based on ROIs

# Saving and Retreiving ROIs

# Selecting Individual cells

## looping through cells and taking screenshots

# Conclusions
