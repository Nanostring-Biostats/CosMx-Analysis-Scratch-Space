---
title: "Dimension reduction"
output: 
rmarkdown::html_vignette: 
toc: true
fig_width: 7 
fig_height: 8 
vignette: >
  %\VignetteIndexEntry{Dimension reduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
<style>
p.caption {
  font-size: 1.5em;
}
</style>
```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


## Introduction

Our goal here is to produce an informative UMAP. To get there, we'll also use PCA to get a reduced-dimension dataset,
and we'll try UMAP under a few parameterizations to see what works best.

```{r prepforumap}
# load data:
norm <- readRDS("processed_data/norm.RDS")
annot <- readRDS("processed_data/annot.RDS")

# run PCA:
pca_result <- irlba::irlba(norm, nv = 25)
# Get the top principal components (scores)
pc <- pca_result$u %*% diag(pca_result$d)
```


## !! DM should handle this one !!



